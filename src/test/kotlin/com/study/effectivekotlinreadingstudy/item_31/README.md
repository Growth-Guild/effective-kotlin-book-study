# Item 31. 문서로 규약을 정의하라

- - -

* 함수가 무엇을 하는지 명확하게 설명하고 싶다면, KDoc 주석을 붙여 주는 것이 좋다.
```kotlin
/**
 * 이 프로젝트에서 짧은 메시지를 사용자에게
 * 출력할 때 사용하는 기본적인 방식입니다.
 * @param message 사용자에게 보여 줄 메시지
 * @param length 메시지의 길이가
 * 어느 정도 되는지 나타내는 enum 값
 */
fun Context.showMessage(
    message: String,
    duration: MessageLength = MessageLength.LONG,
) {
    val toastDuration = when(duration) {
        SHORT -> Length.SHORT
        LONG -> Length.LONG
    }
    Toast.makeText(this, message, toastDuration).show()
}

enum class MessageLength { SHORT, LONG }
```
* 일반적인 문제는 행위가 문서화되지 않고, 요소의 이름이 명확하지 않다면 이를 사용하는 사용자는 우리가 만들려고 했던 추상화 목표가 아닌 현재 구현에만 의존하게 된다. 이러한 문제는 예상되는 행위를 문서로 설명함으로써 해결한다.

- - -

### 규약
* 예측되는 행위를 요소의 규약(contract of an element)라고 한다.
* 현실의 규약과 마찬가지로 규약의 당사자들은 서로 상대방이 규약을 안정적으로 지킬 것이라 믿는다.
* 규약을 지킨다면 클래스를 사용하는 사람은 클래스가 내부적으로 어떻게 구현되어 있는지를 걱정하지 않아도 된다.
* 클래스를 만드는 사람과 사용하는 사람이 미리 정의된 규약에 따라 독립적으로 작업을 할 수 있다.

### 규약 정의하기
* 이름
  * 일반적인 개념과 관련된 메서드는 이름만으로 예측할 수 있다.
* 주석과 문서
  * 필요한 모든 규약을 적을 수 있는 강력한 방법이다.
* 타입
  * 타입은 객체에 대한 많은 것을 알려준다. 어떤 함수의 선언에 있는, 리턴 타입과 아규먼트 타입은 큰 의미를 지닌다.
  * 자주 사용되는 타입의 경우에는 타입만 보아도 어떻게 사용하는지 알 수 있지만, 일부 타입은 문서에 추가로 설명해야 할 의무가 있다.

### 주석을 써야 할까?
* 주석을 함께 사용하면 요소(함수 또는 클래스)에 더 많은 내용의 규약을 설명할 수 있다.
* 추가적으로 현대의 주석은 문서를 자동 생성하는 데 많이 사용된다.
* 대부분의 기능은 이름 등으로도 무엇을 하는지 확실하게 알 수 있으므로, 주석을 활용한 추가적인 설명이 필요 없다.
* 극단적인 것은 언제나 좋지 않다. 코드만 읽어도 어느 정도 이해하는 코드를 작성하도록 노력하되, 부가적으로 설명이 필요하다면 주석을 활용하여, 정보 제공의 균형을 잘 맞추어야 한다.

### KDoc 형식
* 주석으로 함수를 문서화할 때 사용되는 공식적인 형식을 KDoc이라고 한다.
* 모든 KDoc 주석은 /**로 시작해서 */로 끝난다. 그 사이의 모든 줄은 일반적으로 *로 시작한다.
* KDoc 주석의 구조
  * 첫 번째 부분은 요소에 대한 요약 설명이다.
  * 두 번째 부분은 상세 설명이다.
  * 이어지는 줄은 모두 태그로 시작한다. 이러한 태그는 추가적인 설명을 위해 사용된다.

### 타입 시스템과 예측
* 클래스가 어떤 동작을 할 것이라 예측되면, 그 서브클래스도 이를 보장해야한다. 이를 리스코프 치환 원칙이라고 부른다.
  * 'S가 T의 서브타입이라면, 별도의 변경 없이도 T 타입 객체를 S 타입 객체로 대체할 수 있어야 한다.'
  * 사용자가 클래스의 동작을 확실하게 예측할 수 있게 하려면, 공개 함수에 대한 규약을 잘 지정해야 한다.
* 표준 라이브러리와 인기 있는 라이브러리에 있는 대부분의 클래스는 그 서브클래스에 대한 자세한 설명과 규약을 갖고 있다.
  * 설명과 규약은 인터페이스를 유용하게 만든다.
* 규약이 지켜지는 범위에서는 이를 구현하는 클래스를 자유롭게 만들어도 된다.

### 조금씩 달라지는 세부 사항
* 구현의 세부적인 내용은 조금씩 달라질 수 있지만, 최대한 많이 보호하는 것이 좋다.
* 일반적으로 캡슐화를 통해서 이를 보호한다.
* 캡슐화는 '허용하는 범위'를 지정하는 데 도움을 주는 도구이다.
  * 캡슐화가 많이 적용될수록, 사용자가 구현에 신경을 많이 쓸 필요가 없어지므로, 더 많은 자유를 갖게 된다.
